<script type='text/javascript' src='widgets/sp-quote/js/vehicle-lookup.js' ></script>
<!--script type='text/javascript' src='widgets/sp-quote/js/manual-vehicle-lookup.js'></script-->
<script type='text/javascript' src='widgets/sp-quote/js/form-hints.js' ></script>

<script>
	rf.onFormLoad(function() {
		var regInput = $('#input_reg');
		var cdlUrl = regInput.attr('rf.source');
		var abiUrl = $('#abiLookupProxy').attr('rf.source');
		var flowId = $('[name=\'rf.flowId\']').val();
		
		var vehicleLookup = new VehicleLookup(cdlUrl, abiUrl, flowId, regInput);
		vehicleLookup.init();
		
		$(".findCar [type='button']").click(function() {
			vehicleLookup.lookupVehicle(regInput.val().toUpperCase());
		})
	})

	$('form select').change( function(){
		$(this).addClass('changed');
	});

	var flowId = $('[name=\'rf.flowId\']').val();
	var lists = new ListResources(flowId);

</script>

<form rhinoforms="true">

	<div class="field findCar">
		<label for="input_reg">Enter your vehicle registration number:</label>
		<input id="abiLookupProxy" type="hidden" style="display:none" rf.source="{{$vehicle-model-lookup}}" />
		<div id="uk_reg_plate">
			<div id="flag"></div>
			<input  id="input_reg" type="text" name="reg" rf.validation="required" rf.source="{{$vehicle-lookup}}"/>
		</div>
		<input type="button" value="Find" id="findReg"/>
		<input type="hidden" name="make" />
		<input type="hidden" name="model" />
		<input type="hidden" name="fuel" />
		<input type="hidden" name="engineCapacity" />
		<input type="hidden" name="multiple" />
		<input type="hidden" name="vehKeyReg" />
		<input type="hidden" name="transmissionReg" />
		<input type="hidden" name="vehDescReg" />
		<input type="hidden" name="yomReg" />
	</div>
		
	<div class="navigation" id="navigation">
		<input type="submit" rf.action="next" value="Next"/>
	</div>
</form>
